SET(V4R_MAX_YML_FOR_MATLAB 0 CACHE BOOL "yml for matlab" )
IF(V4R_MAX_YML_FOR_MATLAB)

SET(MEX_EXTENSION mexglx)
INCLUDE(FindMatlab)
FIND_PROGRAM(MEX_COMPILER mex)

IF(MEX_COMPILER)

SET(MEX_OPENCV_LIBRARIES
  -lcv 
  -lcxcore  
  -lhighgui  )

MACRO (CREATE_MEX _name)
	ADD_CUSTOM_TARGET(${_name} 
	ALL echo
	DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/${_name}.${MEX_EXTENSION}
	)
	ADD_CUSTOM_COMMAND(
	OUTPUT ${CMAKE_CURRENT_SOURCE_DIR}/${_name}.${MEX_EXTENSION} 
	COMMAND   ${MEX_COMPILER} ${CMAKE_CURRENT_SOURCE_DIR}/${_name}.cpp 
  ARGS      -outdir ${CMAKE_CURRENT_SOURCE_DIR} -O ${MEX_OPENCV_LIBRARIES} 
	COMMENT   "MEX"
	)
ENDMACRO (CREATE_MEX _name)

CREATE_MEX (mex_yml )
ENDIF(MEX_COMPILER)

ENDIF(V4R_MAX_YML_FOR_MATLAB)
