digraph G {
	graph [layout=dot rankdir=TB ranksep="0.5"]
		// George Year 2 Automated Tutor

		subgraph { 
			rank=same
			stStart      
			stTableEmpty 
		}

		stFinished   
		opLoadScene [ shape="box" ]
		stWaitToAppear
		stObjectOn
		stTeaching
		opDescribe [ shape="box" ]
		opSayHi    [ shape="box" ]
		stWaitForResponse
		stWaitForLearningTask

		stFinished
		stTimedOut

		subgraph { 
			rank=same
			stEndOfTeaching
			stUnloadScene
			opUnloadScene [ shape="box" ]
			stWaitToDisappear
		}


		{ stStart } -> { stTableEmpty }
		{ stTableEmpty } -> { opLoadScene }
		{ opLoadScene } -> {stWaitToAppear }
		{ stTableEmpty } -> { stFinished } [ label="No more tests" ]
		{ stWaitToAppear } -> { stObjectOn }
		{ stWaitToAppear } -> { stTimedOut } /*TIME [ taillabel="to=20" labelfontcolor="red" ] */
		{ stObjectOn } -> { stTeaching } [ /*TIME taillabel="wait=5" */ label="lock-VO" labelfontcolor="blue" ]
		{ stTeaching } -> { opDescribe } [ label="Exactly 1 object,\nKnown attribute" ]
		{ stTeaching } -> { opSayHi } [ label="No Attribute" ]
		{ opDescribe } -> { stWaitForResponse } 
		{ opSayHi } -> { stWaitForResponse2 }
		{ stTeaching } -> { stEndOfTeaching }
		{ stTeaching } -> { stTimedOut } /*TIME [taillabel="to=10" labelfontcolor="red"] */
		{ stWaitForResponse } -> { stWaitForLearningTask } [ label="Got Response" ]
		{ stWaitForResponse } -> { stTimedOut } /*TIME [ taillabel="to=15"  labelfontcolor="red"] */
		{ stWaitForResponse2 } -> { stTeaching }
		{ stWaitForResponse2 } -> { stTimedOut } /*TIME [ taillabel="to=15"  labelfontcolor="red"] */
		{ stWaitForLearningTask } -> { stTeaching } [ label="Got LearningTask" ]
		{ stWaitForLearningTask } -> { stTimedOut } /*TIME [ taillabel="to=120"  labelfontcolor="red"] */
		{ stEndOfTeaching } -> { stUnloadScene }
		{ stUnloadScene } -> { opUnloadScene } [ /*TIME taillabel="wait=5" */ label="unlock-VO" labelfontcolor="blue" ]
		{ opUnloadScene } -> { stWaitToDisappear }
		{ stWaitToDisappear } -> { stTableEmpty }
		{ stWaitToDisappear } -> { stTimedOut } /*TIME [taillabel="to=20" labelfontcolor="red"] */
		{ stTimedOut } -> { stUnloadScene }


}
