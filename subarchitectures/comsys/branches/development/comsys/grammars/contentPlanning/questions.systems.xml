<?xml version="1.0" encoding="UTF-8"?>

<!-- For a complete description of what action steps are built-in, and
     what formats the definitions of systems should take, see the file
     "../ucpsystems.xsd".  
-->

<systems> 


<!-- /**

@system blabla

*/ --> 


<system id="question.wh" region="QUESTIONS" metafunction="ideational">
<!-- need to make sure that this system only ges entered for wh-questions, or that is only inserts specifier for them and not for other ascriptions! -->
   <chooser id="c-question.wh"/> 
   <conditions>
      <condition features="@feat:Mood:int @type:ascription @feat:AscriptionRelsReplaced:true"/> 
	  <!-- if test for feature would work, could add that too into the condition-->
	  <!-- could be other types as well, in that case the corresponding dependency types need to be added -->
   </conditions>
   <actions>

   <action choice="wh-target">
	 <identify-nomvar mode="Cop-Restr" dest="RESTR" scope="global"/> <!-- this identif has already been done once in transitivity -->
     <!-- add wh-restr -->
	 <add-relation mode="Wh-Restr" dest="w1" type="specifier" />
	 <add-proposition dest="w1" propositions="@which" />   <!-- should make a distinction between which/what -->
	 <identify-nomvar mode="Wh-Restr" dest="w1" scope="global" />
	 <move-locus nomvar="w1" />
     <!-- add wh-restr scope correferential with target -->
     <add-relation mode="Scope" dest="RESTR" type="*VAR*"/>  
   </action>      

   <action choice="wh-property">
	 <identify-nomvar mode="Cop-Scope" dest="SCOPE" scope="global"/> <!-- this identif has already been done once in transitivity -->
 	 <add-feature feature="QWhProperty" value="true" /> 	 
   </action>      

  <action choice="not-wh-question">
  </action>
  
   </actions>
</system>


<system id="question.wh.property" region="QUESTIONS" metafunction="ideational">
   <chooser id="c-question.wh.property"/> 
   <conditions>
      <condition features=" @feat:QWhProperty:true"/> 
   </conditions>
   <actions>

   <action choice="wh-type-property"> <!-- kept this for future reference or use -->
	 <identify-nomvar mode="Cop-Scope" dest="SCOPE" scope="global"/>
	 <add-proposition dest="SCOPE" propositions="@what" />
	 <add-relation mode="Wh-Restr" dest="SCOPE" type="*VAR*" />
     <add-feature  dest="SCOPE" feature="PRONOMINALIZED" value="true" /> 
   </action>

   <action choice="wh-type-property-somesmart attempt"> 
      <!-- a what-question; instead of "what is x" we're going to generate "what x is this" -->	  
	 <replace-relation mode="Cop-Scope" newmode="Cop-Scope-JunkIt"	  />
	 <replace-relation mode="Cop-Restr" newmode="Cop-Scope"	  />
	 <identify-nomvar mode="Cop-Scope" dest="SCOPE" scope="global"/>

	 <add-relation mode="Cop-Restr" dest="c1" type="entity" />
	 <add-proposition dest="c1" propositions="@context" />
	 <add-feature dest="c1" feature="Delimitation" value="unique" />  <!-- this overwrites delim -->
     <add-featue dest="c1" feature="Proximity" value="proximal" />
	
	 <!-- add subject coreferential with new restr -->
	 <replace-relation mode="Subject" newmode="Subject-JunkIt"	  />
 	 <identify-nomvar mode="Cop-Restr" dest="RESTR" scope="global"/>
     <add-relation mode="Subject" dest="RESTR" type="*VAR*"/> 
	 	 
	 <add-relation mode="Wh-Restr" dest="w1" type="specifier" />
	 <add-proposition dest="w1" propositions="@what" /> 
	 <identify-nomvar mode="Wh-Restr" dest="w1" scope="global" />
     <move-locus nomvar="w1" />
     <!-- add wh-restr scope correferential with property -->
     <add-relation mode="Scope" dest="SCOPE" type="*VAR*"/>  

   </action>

   <action choice="wh-location-property"> <!-- a where-question -->
	 <identify-nomvar mode="Cop-Scope" dest="SCOPE" scope="global"/>
	 <add-proposition dest="SCOPE" propositions="@where" />
	 <add-relation mode="Wh-Restr" dest="SCOPE" type="*VAR*" />
   </action>

   <action choice="wh-other-property">   <!-- which/what color is the box -->
                                         <!-- how about what color does the box have -->
     <!-- add wh-restr -->
	 <add-relation mode="Wh-Restr" dest="w1" type="specifier" />
	 <identify-nomvar mode="Wh-Restr" dest="w1" scope="global" />
    <add-feature  dest="w1" feature="QWhPropertyOther" value="true" /> 
     <move-locus nomvar="w1" />
     <!-- add wh-restr scope correferential with property -->
     <add-relation mode="Scope" dest="SCOPE" type="*VAR*"/> 
   </action>

   </actions>
 </system>


<system id="question.wh.property.wh-word" region="QUESTIONS" metafunction="ideational">
   <chooser id="c-question.wh.property.wh-word"/> 
   <conditions>
      <condition features="@feat:QWhPropertyOther:true"/> 
   </conditions>
   <actions>
        <action choice="wh-what">  
        <add-proposition propositions="@what" />  
        </action>
        <action choice="wh-which">  
        <add-proposition propositions="@which" />   
        </action>
    </actions>
</system>

</systems>
