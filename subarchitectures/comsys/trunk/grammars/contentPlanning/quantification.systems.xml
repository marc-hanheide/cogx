<?xml version="1.0" encoding="UTF-8"?>

<!-- For a complete description of what action steps are built-in, and
     what formats the definitions of systems should take, see the file
     "../ucpsystems.xsd".  
-->

<systems> 


<!-- /**
@system quantification.entity combines the assignment of number and quantification, and also the insertion on an explicit quantifier.  
 Currently, not all choices are "active" (=some choices will never be taken by the corresponding chooser.  
 
Known problems: 

Names of newly inserted nominals are constants, so will be reused when system is entered again, which will lead to unintended "correferences".

Any string as value of input feature "Quantity" will be treated as insertion of an explicit quantifier with that value. Generation will produce nothing in this case. Input should be filtered for actual numbers in the inquiry code. 

Need to exclude cases where the nominal is under <Compound> relation.

*/ --> 
<system id="quantification.entity" region="QUANTIFICATION" metafunction="ideational">
   <chooser id="c-quantity"/>
   <conditions>
      <condition features="@type:entity @feat:PRONOMINALIZED:false"/>  
      <condition features="@type:thing @feat:PRONOMINALIZED:false"/> 		  
      <condition features="@type:physical @feat:PRONOMINALIZED:false"/>  <!-- other than mass -->
   </conditions>
   <actions>
      <action choice="one-noquantifier">  <!-- just def/indef definite article -->
	     <add-feature feature="Num" value="sg"/>
		 <add-feature feature="Quantification" value="specific"/>
      </action>
      <action choice="one-quantifier">  <!-- cardinal numeral modifier; LF currently not supported by grammar -->
	     <add-feature feature="Num" value="sg"/>
		 <add-feature feature="Quantification" value="specific"/>
 	   <!--  <add-relation mode="Modifier" 
	                 dest="one-quantity" type="number-cardinal"/>
		 <copy-feature srcfeat="Quantity" destfeat="Modifier" destnom="one-quantity" mode="relation" />	-->
      </action>
	  
      <action choice="multiple-noquantifier">  
	    <!-- currently inquiry won't ever return this as result; could be random choice or by alignment -->
	     <add-feature feature="Num" value="pl"/>
	     <add-feature feature="Quantification" value="unspecific"/>
      </action>
      <action choice="multiple-quantifier"> <!-- cardinal numeral modifier -->
	     <add-feature feature="Num" value="pl"/>
 	     <add-relation mode="Modifier" 
	                 dest="multi-quantity" type="number-cardinal"/>
		 <copy-feature srcfeat="Quantity" destfeat="Modifier" destnom="multi-quantity" mode="relation" />		 
      </action>

      <action choice="list-conjunction">   
	     <add-feature feature="Num" value="pl"/>
      </action>

       <action choice="list-disjunction">   
      </action>
	  
       <action choice="no-quant">   
        </action>
	  
        <action choice="unknown">   
	     <!-- this is the default for when the feature is not given; should also be for uninterpretable, but that needs a filter for numbers -->
	     <add-feature feature="Num" value="sg"/>
	     <add-feature feature="Quantification" value="specific"/>
      </action>
	  
      <action choice="zero-sg">
	     <add-feature feature="Num" value="sg"/>
	     <add-feature feature="Quantification" value="specific"/>
 	     <add-relation mode="Modifier" 
	                 dest="zero-quantity" type="quantity"/>
	     <identify-nomvar mode="Modifier" dest="zero-quantity" scope="global"/>					 
		 <add-proposition dest="zero-quantity" propositions="@No" />
      </action>
      <action choice="zero-pl">  <!-- currently inquiry won't ever return this as result; could be random choice or by alignment -->
	     <add-feature feature="Num" value="pl"/>
	     <add-feature feature="Quantification" value="specific"/>
 	     <add-relation mode="Modifier" 
	                 dest="zero-quantity" type="quantity"/>
		 <add-proposition propositions="@zero-quantity" dest="No" />
	  </action>
   </actions>
</system>

<!-- /**
@system quantification.speaker  assigns number to speaker self-reference@feat:PRONOM. 
*/ --> 
<system id="quantification.speaker" region="QUANTIFICATION" metafunction="ideational">
<!-- instead of having a special gate for uncountable, the chooser in quantification.entity could check for ontological sort -->
   <chooser id="default"/>
   <conditions>
      <condition features="@prop:I @type:animate"/>  
   </conditions>
   <actions>
      <action choice="default"> 
	     <add-feature feature="Num" value="sg"/> 
      </action>
   </actions>
</system>

<!-- /**
@system quantification.substance combines the assignment of number and quantification to mass/substance entities. 
*/ --> 
<system id="quantification.substance" region="QUANTIFICATION" metafunction="ideational">
<!-- instead of having a special gate for uncountable, the chooser in quantification.entity could check for ontological sort -->
   <chooser id="c-general.check.type.substance"/>
   <conditions>
      <condition features="@type:e-substance @feat:PRONOMINALIZED:false"/>  
   </conditions>
   <actions>
      <action choice="type-substance"> 
	     <add-feature feature="Quantification" value="uncountable"/>
<!--	     <add-feature feature="Num" value="sg"/>  -->
      </action>
      <action choice="type-non-substance">
      </action>
   </actions>
</system>


<system id="quantification.demonstrative.pronoun" region="QUANTIFICATION" metafunction="ideational">
<!-- instead of having a special gate for uncountable, the chooser in quantification.entity could check for ontological sort -->

<!-- this only covers single entities so far
 -->

   <chooser id="c-quantification.demonstrative.pronoun"/>
   <conditions>
      <condition features="@prop:context @type:entity"/>  
      <condition features="@prop:context @type:thing"/>  
      <condition features="@prop:context @type:physical"/>  
    </conditions>
   <actions>
      <action choice="single"> 
	     <add-feature feature="Quantification" value="specific"/>
	     <add-feature feature="Num" value="sg"/> 
      </action>
      <action choice="multiple"> 
	     <add-feature feature="Quantification" value="unspecific"/>
	     <add-feature feature="Num" value="pl"/> 
      </action>
   </actions>
</system>


</systems>
