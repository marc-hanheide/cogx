
.PHONY: all

DIR=modice
MOD=icemodule.castcontrol

all: $(DIR)/__init__.py

$(DIR):
	mkdir $(DIR)

$(DIR)/castagent_ice.py: $(DIR) castagent.ice
	slice2py --no-package --output-dir $(DIR) castagent.ice

$(DIR)/__init__.py: $(DIR) $(DIR)/castagent_ice.py
	echo "# This file is autogenerated" > $(DIR)/__init__.py
	echo "import castagent_ice" >> $(DIR)/__init__.py
	echo "import $(MOD).CastAgent" >> $(DIR)/__init__.py

