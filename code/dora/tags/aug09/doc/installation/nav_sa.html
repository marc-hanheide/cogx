<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
 <title>nav/tutorial/installation - CogX - Trac</title><link rel="start" href="/trac/cogx/wiki" /><link rel="search" href="/trac/cogx/search" /><link rel="help" href="/trac/cogx/wiki/TracGuide" /><link rel="stylesheet" href="/trac/cogx/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/cogx/chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="/trac/cogx/chrome/common/trac.ico" type="image/x-icon" /><link rel="shortcut icon" href="/trac/cogx/chrome/common/trac.ico" type="image/x-icon" /><link rel="alternate" href="/trac/cogx/wiki/nav/tutorial/installation?format=txt" title="Plain Text" type="text/x-trac-wiki" /><style type="text/css">
</style>
 <script type="text/javascript" src="/trac/cogx/chrome/common/js/trac.js"></script>
</head>
<body>


<div id="banner">


<div id="content" class="wiki">

 
  
  
   
   <div class="wikipage">
    <div id="searchable"><h1 id="TheNavigationSubarchitecture-nav.sa">The Navigation Subarchitecture - nav.sa</h1>
<p>
The navigation subarchitecture or nav.sa for short is responsible for maintaining the lower levels of the spatial representation, keeping the robot localized and for moving it around in the environment. The lower levels of the spatial representation refers to a metric, line based map and a so called navigation graph that encodes free space and its connectivity. 
</p>
<h2 id="Installation">Installation</h2>
<h3 id="CURE">CURE</h3>
<p>
To build and run the navsa you need to have CURE installed. CURE is a software package developed at KTH aiming at providing a "turn key solution" for navigation, localization and mapping. Most of the components in the version of nav.sa that you will be working with are in fact wrappers around components in CURE. CURE also contains some nifty little helper classes for performing transformations between coordinate frames and working with matrices. 
</p>
<p>
To install CURE you need to do the following. Below, $COGX_ROOT is the place where you got the code for the summer school, that is the directory where the css folder resides.
</p>
<pre class="wiki">sudo apt-get install automake autoconf libtool
cd $COGX_ROOT
svn co https://codex.cs.bham.ac.uk/svn/nah/cosy/development/kth/cosycure
cd cosycure
./do-it-all.sh
</pre><p>
This will install cosycure in the directory cosycure itself. When you build the nav.sa you need to specify where CURE is installed and in the example above that would be in $COGX_ROOT/cosycure.
</p>
<h3 id="Peekabot">Peekabot</h3>
<p>
Peekabot is the visualization tool used in nav.sa. It is not strictly necessary to have peekabot installed but working with nav.sa is much easier when you see what is going on "inside" it. The homepage of peekabot can be found at <a class="ext-link" href="http://www.peekabot.org"><span class="icon">http://www.peekabot.org</span></a>.
</p>
<p>
You need boost 1.35 to compile peekabot plus some additional libraries. Under ubuntu 8.10 you would need to do
</p>
<pre class="wiki">sudo apt-get install libboost1.35-dev libfltk1.1-dev libpng12-dev libxerces-c2-dev bzr libfreetype6-dev libglut3-dev libtool automake autoconf
cd &lt;SOMEWHERE NICE&gt;
bzr branch lp:peekabot
cd peekabot
autoreconf -i
./configure
make
sudo make install
</pre><p>
If you're on an Intel Mac you can install the binary version of Peekabot from <a class="ext-link" href="http://downloads.sourceforge.net/peekabot/peekabot-0.5.2-x86-macosx.tar.bz2?use_mirror=garr"><span class="icon">sourceforge</span></a>. This is not the latest and greatest version, but it should be enough to get you started. 
</p>
<p>
Peekabot allows you to load model from file. These models could for example be of robot base, arms and objects that the robot can recognize. Some of these models have been made specifically for <a class="missing wiki" href="/trac/cogx/wiki/CoSy" rel="nofollow">CoSy?</a>/CogX. The models are found in subarchitectures/nav.sa/config/peekabot-models. You need help peekabot to find these models. There are two ways to accomplish that. One is to copy the files from the subdirectories models and scenes into the corresponding directories under ~/.peekabot. The other way to do it is to configure peekabot to look in for model and scene files directly in the nav.sa subdirectory. You do this by editing the file ~/peekabot/config.xml. You need to add paths to the scenes and models directories under the "model_dir" section and a path to the scenes directory under the "scene_dirs" section.
</p>
<p>
When you have compiled and installed peekabot and made the CogX model files available you should be able to test the installation by starting peekabot
</p>
<pre class="wiki">peekabot&amp;
</pre><p>
and selecting "Load Scene" under the File menu. If you enter "<a class="missing wiki" href="/trac/cogx/wiki/CogXp" rel="nofollow">CogXp?</a>3.xml" you should see a model of the CogX demo platform.
</p>
<p>
If you get a black screen instead of a 3D scene, you may have to deactivate the 3D visual effects of your desktop (on Ubuntu: System --&gt; Preferences --&gt; Appearance --&gt; Visual effects ).
</p>
<p>
If you want to update peekabot from the repository you do
</p>
<pre class="wiki">cd peekabot
bzr pull
make
sudo make install
</pre><h3 id="Player">Player</h3>
<p>
To interface all(?) the hardware except cameras (so robots, lasers, etc) we use player at the bottom. The main advantage of this is that it allows us to run the system in simulation without any changes to any of the code in the system. You should use player version 2.1.1. If you get player 2.1.1 from sourceforge you will need to edit some files to get it to run. Therefore we recommend that you download the version linked to below instead
</p>
<p>
<a class="ext-link" href="http://www.cs.bham.ac.uk/~nah/cogx/css09/player-2.1.1.tar.gz"><span class="icon">Player 2.1.1</span></a>
</p>
<p>
We use 2.1.1 since the 2.1.2 has a broken driver for the P3DX robots it seems.
</p>
<p>
Before compiling player please install the ltdl development files (stage needs player to be compiled with it)
</p>
<pre class="wiki">sudo apt-get install libltdl7-dev libgtk2.0-dev
</pre><p>
Also make sure that you have the file /etc/X11/rgb.txt. Get a copy of it under subarchitectures/nav.sa/config/rgb.txt and copy it into /etc/X11
</p>
<p>
Building and installing player follows the standard automake routine
</p>
<pre class="wiki">./configure
make
sudo make install
</pre><h3 id="Stage">Stage</h3>
<p>
Download stage 2.1.1 using the link below
</p>
<p>
<a class="ext-link" href="http://www.cs.bham.ac.uk/~nah/cogx/css09/stage-2.1.1.tar.gz"><span class="icon">Stage 2.1.1</span></a>
</p>
<p>
Building and installing stage follows the standard automake routine
</p>
<pre class="wiki">./configure
make
sudo make install
sudo ldconfig
</pre><p>
When you run configure make sure that stage finds your installation of player. Otherwise it will not build the stageplugin for player.
</p>
<p>
To test that the installation worked do
</p>
<pre class="wiki">cd stage-2.1.1/worlds
player simple.cfg
</pre><p>
this should bring up a window with a simulated world. If not follow the error messages (did you install the rgb.txt as instructed when building player? Did you install libltdl-dev before building player? If not fix and re-configure and recompile player and then stage)
</p>
<h3 id="subarchitecturesnav.satools">subarchitectures/nav.sa + tools</h3>
<p>
Besides CAST itself the code that is relevant when using the nav.sa is
</p>
<pre class="wiki">subarchitectures/nav.sa/
tools/hardware/robotbase
tools/hardware/laser
tools/hardware/utils
</pre><p>
Build it in the standard cmake style, i.e. go into the BUILD directory and make sure that these are set to compile
</p>

</div>
   </div>
   </div>

</div>



 </body>
</html>

